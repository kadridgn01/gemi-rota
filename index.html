<!doctype html>
<html lang="tr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Rota — İstanbul → Güney Amerika (Afrika duraklı)</title>

<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#2a6aff">
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>

<style>
  html,body,#map{height:100%;margin:0;font-family:system-ui,Arial}
  .dot{background:#fff;border:3px solid #2a6aff;border-radius:50%;width:14px;height:14px}
  .label{background:rgba(0,0,0,.6);color:#fff;padding:2px 6px;border-radius:6px;font:12px/1.2 system-ui}
  .legend{position:absolute;left:12px;bottom:12px;background:#111;color:#fff;padding:10px 12px;border-radius:10px;opacity:.95;z-index:999;max-width:300px}
  #map::after { content:""; position: absolute; inset:0; pointer-events:none; box-shadow: inset 0 0 120px rgba(0,0,0,0.12);}
</style>
</head>
<body>
<div id="map"></div>
<div class="legend">
  İstanbul → Çanakkale → Tunus → Cebelitarık → Tangier → Casablanca → Las Palmas → Praia → Dakar → Abidjan → Recife → Rio → Buenos Aires
</div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script src="https://unpkg.com/@turf/turf/turf.min.js"></script>

<script>
// ====== WAYPOINTS (Tunus dahil) ======
const waypoints = [
  {name:"İstanbul", lat:41.01, lon:28.97},
  {name:"Çanakkale (Dardanel)", lat:40.15, lon:26.41},
  {name:"Tunus (La Goulette)", lat:36.80, lon:10.18},
  {name:"Cebelitarık", lat:36.14, lon:-5.35},
  {name:"Tangier (Fas)", lat:35.79, lon:-5.81},
  {name:"Casablanca (Fas)", lat:33.57, lon:-7.59},
  {name:"Las Palmas (Kanarya)", lat:28.12, lon:-15.43},
  {name:"Praia (Yeşil Burun)", lat:14.92, lon:-23.51},
  {name:"Dakar (Senegal)", lat:14.69, lon:-17.44},
  {name:"Abidjan (Fildişi Sahili)", lat:5.36, lon:-4.01},
  {name:"Recife (Brezilya)", lat:-8.05, lon:-34.88},
  {name:"Rio de Janeiro", lat:-22.90, lon:-43.20},
  {name:"Buenos Aires", lat:-34.60, lon:-58.38}
];

// ====== MAP ======
const map = L.map("map").setView([20, -20], 3);

L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
  attribution:'&copy; OpenStreetMap katkıcıları'
}).addTo(map);

// ====== ROUTE DRAWING ======
for (let i=0; i<waypoints.length-1; i++) {
  const from = turf.point([waypoints[i].lon, waypoints[i].lat]);
  const to   = turf.point([waypoints[i+1].lon, waypoints[i+1].lat]);
  const gc   = turf.greatCircle(from,to,{npoints:100});
  
  const coords = gc.geometry.coordinates.map(c=>[c[1],c[0]]);
  
  L.polyline(coords,{color:"#2a6aff",weight:3,opacity:0.8}).addTo(map);
}

// ====== MARKERS ======
waypoints.forEach(wp=>{
  L.marker([wp.lat, wp.lon],{
    icon:L.divIcon({
      className:"",
      html:`<div class="dot"></div><div class="label">${wp.name}</div>`,
      iconSize:[0,0],
      iconAnchor:[7,-5]
    })
  }).addTo(map);
});
</script>
</body>
</html>
